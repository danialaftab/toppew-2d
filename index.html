<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
</head>

<body>

    <script>
        class GameScene extends Phaser.Scene {
            preload() {
                // this.load.setBaseURL('https://labs.phaser.io');

                this.load.image('bg', 'assets/background.png');
                this.load.spritesheet('plane',
                    'assets/plane_sprite_sheet.png',
                    { frameWidth: 100, frameHeight: 100 }
                );
            }

            create() {
                const { width, height } = this.scale;
                this.bg = this.add.tileSprite(width / 2, height / 2, width, height, 'bg');

                this.player = this.physics.add.sprite(width / 2, height - 200, 'plane');
                // player.setAngle(10);

                this.player.setBounce(0.2);
                this.player.setCollideWorldBounds(true);

                this.anims.create({
                    key: 'left',
                    frames: this.anims.generateFrameNumbers('plane', { start: 2, end: 2 }),
                    frameRate: 10,
                    repeat: -1
                });

                this.anims.create({
                    key: 'straight',
                    frames: this.anims.generateFrameNumbers('plane', { start: 1, end: 1 }),
                    frameRate: 10,
                    repeat: -1
                });

                // this.anims.create({
                //     key: 'turn',
                //     frames: [{ key: 'plane', frame: 4 }],
                //     frameRate: 20
                // });

                this.anims.create({
                    key: 'right',
                    frames: this.anims.generateFrameNumbers('plane', { start: 0, end: 0 }),
                    frameRate: 10,
                    repeat: -1
                });

                this.cursors = this.input.keyboard.createCursorKeys();
            }


            update() {
                this.bg.tilePositionY -= 2; // Scroll background

                if (this.cursors.left.isDown) {
                    this.player.setVelocityX(-160);

                    this.player.anims.play('left', true);
                }
                else if (this.cursors.right.isDown) {
                    this.player.setVelocityX(160);

                    this.player.anims.play('right', true);
                }
                else {
                    this.player.setVelocityX(0);

                    this.player.anims.play('straight');
                }

            }
        }

        const config = {
            type: Phaser.AUTO,
            width: 500,
            height: 800,
            scene: GameScene,
            physics: {
                default: 'arcade',
            }
        };

        const game = new Phaser.Game(config);
    </script>

</body>

</html>